<?xml version="1.0" encoding="UTF-8"?>
<project name="ovpnals-build" default="start-using-java">
	
	<property name="ovpnals.home" value="ovpnals"/>
	<property name="agent.home" value="ovpnals-agent"/>
	
	<!-- Display some help -->
	<target name="help" description="Displays some help.">
		<echo>
You must have run the 'install' target at least once which compiles
all source starts OpenVPN-ALS's installation wizard. You also should
configure the Agent certificate and run 'install-agent' target.
Otherwise resources based on SSL-tunnels will not work.
			
For a list of Ant targets, use "ant -projecthelp"   
			
		</echo>
	</target>

        <target name="sysinfo" description="Display some system information">
                <echo>Operating system: ${os.name}</echo>
                <echo>Java home: ${java.home}</echo>
        </target>


	<target name="clean" description="Removes compiled files">
		<ant dir="${ovpnals.home}" target="clean"/>
		<!-- NOTE This Code use Old Apache Commons VFS. This is not required for new Apache Commons VFS -->
		<!--
		<ant dir="ovpnals-commons-vfs" target="clean"/>
		-->
		<ant dir="ovpnals-community-activedirectory" target="clean"/>
		<ant dir="ovpnals-community-applications" target="clean"/>
		<ant dir="ovpnals-community-network-places" target="clean"/>
		<ant dir="ovpnals-community-pam" target="clean"/>
		<ant dir="ovpnals-community-tunnels" target="clean"/>
		<ant dir="ovpnals-community-unix" target="clean"/>
		<ant dir="ovpnals-community-web-forwards" target="clean"/>
		<ant dir="maverick-crypto" target="clean"/>
		<ant dir="maverick-multiplex" target="clean"/>
		<ant dir="maverick-ssl" target="clean"/>
		<ant dir="maverick-util" target="clean"/>
		<ant dir="${agent.home}" target="clean"/>
	</target>

	<!-- Warning: there's no target to remove the generated HTML files yet -->
	<target name="javadoc" description="Generate javadocs for everything">
		<ant dir="${ovpnals.home}" target="javadoc"/>
		<!-- NOTE This Code use Old Apache Commons VFS. This is not required for new Apache Commons VFS -->
		<!--<ant dir="ovpnals-commons-vfs" target="javadoc"/>-->
		<ant dir="ovpnals-community-activedirectory" target="javadoc"/>
		<ant dir="ovpnals-community-applications" target="javadoc"/>
		<ant dir="ovpnals-community-network-places" target="javadoc"/>
		<ant dir="ovpnals-community-tunnels" target="javadoc"/>
		<ant dir="ovpnals-community-unix" target="javadoc"/>
		<ant dir="ovpnals-community-web-forwards" target="javadoc"/>
		<ant dir="maverick-crypto" target="javadoc"/>
		<ant dir="maverick-multiplex" target="javadoc"/>
		<ant dir="maverick-ssl" target="javadoc"/>
		<ant dir="maverick-util" target="javadoc"/>

		<!-- Javadoc target for Agent is not yet finished -->
		<!-- <ant dir="${agent.home}" target="javadoc"/> -->
	</target>


	<target name="console" description="Starts the OpenVPN-ALS server in the foreground display all output to the console">
		<ant dir="${ovpnals.home}" target="console"/>
	</target>
	
	<target name="start" description="Starts the OpenVPN-ALS in the background">
		<ant dir="${ovpnals.home}" target="start"/>
	</target>

	<target name="start-using-java" description="Starts the OpenVPN-ALS in the foreground without the OS-dependent wrapper">
		<ant dir="${ovpnals.home}" target="start-using-java"/>
	</target>
	
	<target name="stop" description="Stops the running OpenVPN-ALS. Note, this currently does not work on all platforms.">
		<ant dir="${ovpnals.home}" target="stop"/>
	</target>

	<target name="install" description="Run the OpenVPN-ALS installation wizard. The server must not be running.">
		<ant dir="${ovpnals.home}" target="install"/>
	</target>

	<target name="install-agent" description="Install OpenVPN-ALS Agent.">
		<ant inheritall="false" dir="${ovpnals.home}" target="install-agent" />
	</target>

	<target name="install-service" description="Install OpenVPN-ALS as a service.">
		<ant dir="${ovpnals.home}" target="install-service"/>
	</target>

	<target name="uninstall-service" description="Uninstall OpenVPN-ALS service.">
		<ant dir="${ovpnals.home}" target="uninstall-service"/>
	</target>

	<target name="compile" description="Compile OpenVPN-ALS.">
		<ant dir="${ovpnals.home}" target="deploy-community-extensions"/>
	</target>

	<target name="dist" description="Create an executable, ready to distribute version of OpenVPN-ALS">
		<ant inheritall="false" dir="${ovpnals.home}" target="dist"/>
	</target>


</project>
