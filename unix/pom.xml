<?xml version="1.0" encoding="UTF-8" ?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">

    <modelVersion>4.0.0</modelVersion>

    <parent>
        <groupId>com.adito</groupId>
        <artifactId>adito</artifactId>
        <version>0.9.2-SNAPSHOT</version>
    </parent>

    <artifactId>unix</artifactId>
    <name>unix</name>

    <packaging>jar</packaging>

    <description>
	Adito UNIX authentication module
    </description>

    <profiles>
    </profiles>

    <dependencies>
      <dependency>
          <groupId>com.adito</groupId>
          <artifactId>webapp</artifactId>
          <version>${project.version}</version>
      </dependency>
    </dependencies>

<build>

	<finalName>unix</finalName>

	<!-- WAR packaging works, kind of, but includes all the libraries required by the webapp
	     proper. It also requires some (fake) web.xml to run. The only viable option seems
	     to be the Assembly plugin -->

	<plugins>

	<!-- 
                <plugin>
                        <groupId>org.apache.maven.plugins</groupId>
                        <artifactId>maven-war-plugin</artifactId>
                        <version>2.1-beta-1</version>
                        <executions>
                                <execution>
                                        <goals>
                                                <goal>exploded</goal>
                                        </goals>
                                </execution>
                        </executions>

			<configuration>
				<webXml>/tmp/jspweb.xml</webXml>
                        </configuration>
		</plugin>
	-->

		<!-- We need to assemble an old-style SSL-Explorer/Adito compatible
		     extension package until we have less kludgy extension management -->

		<plugin>
			<artifactId>maven-assembly-plugin</artifactId>
			<configuration>

			<!-- We need to use a custom descriptor -->
			<!--
				<descriptorRefs>
					<descriptorRef>bin</descriptorRef>
				</descriptorRefs>
			-->
				<descriptors>
					<descriptor>src/main/assembly/src.xml</descriptor>
				</descriptors>
		
			</configuration>
			<executions>
				<execution>
					<id>make-assembly</id>
					<phase>package</phase>
					<goals>
						<goal>single</goal>
					</goals>
				</execution>
			</executions>
		</plugin>
	</plugins>
</build>
</project>
